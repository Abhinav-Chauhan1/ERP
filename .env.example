# App
NEXT_PUBLIC_APP_NAME="School ERP"
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# Domain Configuration
# ROOT_DOMAIN is required for subdomain routing and super-admin access
# CRITICAL: In production, set this to your actual domain (e.g., sikshamitra.com)
# In development, use localhost
# This prevents super-admin redirects to localhost in production
ROOT_DOMAIN=localhost
NEXT_PUBLIC_ROOT_DOMAIN=localhost

# Authentication (NextAuth v5)
# Generate AUTH_SECRET with: openssl rand -base64 32 (or PowerShell equivalent)
# On Windows PowerShell: $bytes = New-Object byte[] 32; [System.Security.Cryptography.RandomNumberGenerator]::Create().GetBytes($bytes); [Convert]::ToBase64String($bytes)
AUTH_SECRET=your_generated_secret_here
# AUTH_URL is required for production deployments
AUTH_URL=http://localhost:3000
# AUTH_TRUST_HOST should be set to "true" for production
AUTH_TRUST_HOST=

# OAuth Provider Credentials (Optional)
# Google OAuth - Get from: https://console.cloud.google.com/apis/credentials
AUTH_GOOGLE_ID=
AUTH_GOOGLE_SECRET=
# GitHub OAuth - Get from: https://github.com/settings/developers
AUTH_GITHUB_ID=
AUTH_GITHUB_SECRET=

# Cloudflare R2 Storage Configuration
# Get your credentials from: https://dash.cloudflare.com/profile/api-tokens
# Create an R2 token with Object Read and Write permissions
R2_ACCOUNT_ID=your_cloudflare_account_id
R2_ACCESS_KEY_ID=your_r2_access_key_id
R2_SECRET_ACCESS_KEY=your_r2_secret_access_key
R2_BUCKET_NAME=your_r2_bucket_name
R2_REGION=auto
# Custom domain for CDN (optional, improves URL appearance)
# Default R2 public URL format: https://pub-{accountId}.r2.dev
# Or use your own custom domain if configured in Cloudflare
R2_CUSTOM_DOMAIN=https://pub-your_cloudflare_account_id.r2.dev
# R2 endpoint URL (auto-generated based on account ID)
R2_ENDPOINT=https://${R2_ACCOUNT_ID}.r2.cloudflarestorage.com

# Database Configuration
# Connection pool settings optimized for Next.js development
# - connection_limit: Maximum number of connections (20 for development, 50+ for production)
# - pool_timeout: Time to wait for connection before timeout (20 seconds)
# - connect_timeout: Time to wait for initial connection (10 seconds)
# Example for Neon (PostgreSQL):
# DATABASE_URL='postgresql://user:password@host:port/database?sslmode=require&connection_limit=20&pool_timeout=20&connect_timeout=10'
DATABASE_URL='postgresql://user:password@host:port/database?sslmode=require'

# Email Service (Resend)
# Get your API key from: https://resend.com/api-keys
# The email service supports:
# - Single and bulk email sending
# - Bounce handling and delivery tracking
# - Retry logic (up to 3 attempts)
# - Template-based emails
RESEND_API_KEY=your_resend_api_key
EMAIL_FROM=noreply@schoolerp.com

# Two-Factor Authentication
# Generate a secure 32-byte key for production: openssl rand -hex 32
TWO_FACTOR_ENCRYPTION_KEY=your_32_byte_hex_key

# Payment Gateway (Razorpay)
# Get your keys from: https://dashboard.razorpay.com/app/keys
RAZORPAY_KEY_ID=your_razorpay_key_id_here
RAZORPAY_KEY_SECRET=your_razorpay_key_secret_here
NEXT_PUBLIC_RAZORPAY_KEY_ID=your_razorpay_key_id_here
RAZORPAY_WEBHOOK_SECRET=your_razorpay_webhook_secret_here

# Rate Limiting (Redis)
# REQUIRED for production: Get your credentials from https://console.upstash.com/ or use your own Redis instance
# For development, the system will fallback to in-memory rate limiting with warnings
# Production deployments MUST use Redis for distributed rate limiting
# REDIS_URL="https://your-redis-url.upstash.io"
# REDIS_TOKEN="your_redis_token"
# Note: Local Redis URLs (redis://localhost:6379) are not supported with Upstash client
# Use Upstash Redis for both development and production for consistency

# IP Whitelisting Configuration
# Comma-separated list of trusted IPs or CIDR ranges that bypass rate limiting
# Examples:
#   Single IP: WHITELISTED_IPS=192.168.1.100
#   Multiple IPs: WHITELISTED_IPS=192.168.1.100,10.0.0.50
#   CIDR range: WHITELISTED_IPS=192.168.1.0/24,10.0.0.0/16
# Default includes localhost for development
WHITELISTED_IPS=127.0.0.1,::1
# Monitoring service IPs (UptimeRobot, Pingdom, etc.)
MONITORING_SERVICE_IPS=
# Additional trusted IPs (office, CI/CD servers, etc.)
TRUSTED_IPS=

# IP Whitelisting for Admin Routes
# Optional: Comma-separated list of IP addresses or CIDR ranges allowed to access admin routes
# Examples: 
#   Single IP: ADMIN_IP_WHITELIST=192.168.1.100
#   Multiple IPs: ADMIN_IP_WHITELIST=192.168.1.100,10.0.0.50,127.0.0.1
#   CIDR range: ADMIN_IP_WHITELIST=192.168.1.0/24,10.0.0.0/16
# If not configured, all IPs are allowed (development mode)
ADMIN_IP_WHITELIST=

# SMS Gateway (MSG91)
# Get your credentials from: https://msg91.com/
# MSG91 provides cost-effective SMS with DLT compliance for India
MSG91_AUTH_KEY=your_msg91_auth_key
MSG91_SENDER_ID=SCHOOL
MSG91_ROUTE=transactional
MSG91_COUNTRY=91

# WhatsApp Business API
# Get your credentials from: https://developers.facebook.com/apps/
# WhatsApp Business API provides rich messaging capabilities
WHATSAPP_ACCESS_TOKEN=your_whatsapp_access_token
WHATSAPP_PHONE_NUMBER_ID=your_phone_number_id
WHATSAPP_BUSINESS_ACCOUNT_ID=your_business_account_id
WHATSAPP_APP_SECRET=your_app_secret
WHATSAPP_API_VERSION=v18.0
WHATSAPP_VERIFY_TOKEN=your_webhook_verify_token

# Communication Service Feature Flags
# WhatsApp Notifications: Set to "true" to enable WhatsApp notifications
USE_WHATSAPP=false

# Cron Job Security
# Secret token for protecting cron job endpoints (e.g., session cleanup)
# Generate with: openssl rand -base64 32
# Required for production deployments with scheduled jobs
CRON_SECRET=

# Feature Flags
# Enhanced Syllabus System - Use new module-based structure instead of legacy units/lessons
# Set to "true" to enable the new module structure, "false" to use legacy structure
NEXT_PUBLIC_USE_ENHANCED_SYLLABUS=true

# Cron Job Security
# Secret token for protecting cron job endpoints (e.g., session cleanup)
# Generate with: openssl rand -base64 32
# Required for production deployments with scheduled jobs
CRON_SECRET=

# Feature Flags
# Enhanced Syllabus System - Use new module-based structure instead of legacy units/lessons
# Set to "true" to enable the new module structure, "false" to use legacy structure
NEXT_PUBLIC_USE_ENHANCED_SYLLABUS=true
